<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ´çº³çŸ³æ²¹åŒ–å·¥æ— äººæœºå·¡æ£€è°ƒåº¦ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: #0a0e1a;
            color: #ffffff;
            overflow: hidden;
        }

        .container {
            display: grid;
            grid-template-columns: 300px 1fr 350px;
            grid-template-rows: 60px 1fr;
            height: 100vh;
            gap: 2px;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .logo {
            font-size: 20px;
            font-weight: bold;
            color: #00d4ff;
        }

        .status-bar {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff88;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* å·¦ä¾§æ§åˆ¶é¢æ¿ */
        .left-panel {
            background: rgba(20, 30, 48, 0.95);
            border-right: 1px solid #2a3f5f;
            overflow-y: auto;
        }

        .panel-section {
            margin: 15px;
            background: rgba(30, 45, 70, 0.8);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #3a5f8f;
        }

        .section-title {
            font-size: 16px;
            font-weight: bold;
            color: #00d4ff;
            margin-bottom: 10px;
            border-bottom: 1px solid #3a5f8f;
            padding-bottom: 5px;
        }

        .drone-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .drone-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background: rgba(40, 60, 90, 0.6);
            border-radius: 5px;
            border-left: 3px solid #00ff88;
            cursor: pointer;
            transition: all 0.3s;
        }

        .drone-item:hover {
            background: rgba(50, 70, 100, 0.8);
            transform: translateX(5px);
        }

        .drone-item.warning {
            border-left-color: #ffaa00;
        }

        .drone-item.error {
            border-left-color: #ff4444;
        }

        .drone-info {
            font-size: 12px;
        }

        .drone-id {
            font-weight: bold;
            color: #00d4ff;
        }

        .battery {
            font-size: 11px;
            color: #88ff88;
        }

        .control-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .btn {
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #666, #888);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        /* ä¸»åœ°å›¾åŒºåŸŸ */
        .map-container {
            position: relative;
            background: #0a0e1a;
            overflow: hidden;
        }

        .map-canvas {
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, #1a2332, #0a0e1a);
        }

        .map-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #3a5f8f;
        }

        .coordinates {
            font-size: 12px;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .scale-info {
            font-size: 11px;
            color: #888;
        }

        /* å³ä¾§ä¿¡æ¯é¢æ¿ */
        .right-panel {
            background: rgba(20, 30, 48, 0.95);
            border-left: 1px solid #2a3f5f;
            overflow-y: auto;
        }

        .info-tabs {
            display: flex;
            background: rgba(30, 45, 70, 0.8);
            border-bottom: 1px solid #3a5f8f;
        }

        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            font-size: 12px;
        }

        .tab.active {
            border-bottom-color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
        }

        .tab-content {
            padding: 15px;
        }

        .facility-item {
            background: rgba(30, 45, 70, 0.6);
            border-radius: 5px;
            padding: 12px;
            margin: 8px 0;
            border-left: 3px solid #00ff88;
        }

        .facility-item.warning {
            border-left-color: #ffaa00;
        }

        .facility-item.critical {
            border-left-color: #ff4444;
        }

        .facility-name {
            font-weight: bold;
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .facility-status {
            font-size: 11px;
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
        }

        .status-value {
            color: #88ff88;
        }

        .status-value.warning {
            color: #ffaa00;
        }

        .status-value.critical {
            color: #ff4444;
        }

        .chart-container {
            height: 150px;
            background: rgba(30, 45, 70, 0.4);
            border-radius: 5px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }

        .chart-title {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 12px;
            color: #00d4ff;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        .drone-marker {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #00ff88;
            border-radius: 50%;
            animation: droneMove 10s linear infinite;
            box-shadow: 0 0 10px #00ff88;
        }

        @keyframes droneMove {
            0% { transform: translate(100px, 200px); }
            25% { transform: translate(300px, 150px); }
            50% { transform: translate(500px, 300px); }
            75% { transform: translate(200px, 400px); }
            100% { transform: translate(100px, 200px); }
        }

        .facility-marker {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ffaa00;
            border-radius: 50%;
            box-shadow: 0 0 8px #ffaa00;
        }

        .base-station {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #00d4ff;
            border-radius: 50%;
            box-shadow: 0 0 15px #00d4ff;
        }

        .path-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00ff88, transparent);
            animation: pathFlow 3s linear infinite;
        }

        @keyframes pathFlow {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* K-meansè·¯å¾„è§„åˆ’ç›¸å…³æ ·å¼ */
        .dynamic-path-line {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, transparent, #00ff88, transparent);
            transform-origin: left center;
            z-index: 10;
            animation: pathFlow 2s linear infinite;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .dynamic-path-line:hover {
            height: 4px;
            filter: brightness(1.3);
        }

        .cluster-center {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #ff6666, #ff4444);
            border-radius: 50%;
            border: 2px solid #ffffff;
            box-shadow: 0 0 15px #ff6666;
            z-index: 15;
            animation: clusterPulse 3s ease-in-out infinite;
        }

        @keyframes clusterPulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 0.8;
            }
            50% { 
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .path-info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #3a5f8f;
            color: #ffffff;
            font-size: 12px;
            max-width: 320px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .alert-banner {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #ff4444, #ff6666);
            color: white;
            text-align: center;
            padding: 8px;
            font-size: 14px;
            font-weight: bold;
            z-index: 1000;
            animation: alertBlink 1s infinite alternate;
        }

        @keyframes alertBlink {
            0% { opacity: 0.8; }
            100% { opacity: 1; }
        }

        .hidden {
            display: none;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 250px 1fr 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <header class="header">
            <div class="logo">ğŸš æˆ´çº³çŸ³æ²¹åŒ–å·¥æ— äººæœºå·¡æ£€è°ƒåº¦ç³»ç»Ÿ</div>
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-dot"></div>
                    <span>ç³»ç»Ÿæ­£å¸¸</span>
                </div>
                <div class="status-item">
                    <span>åœ¨çº¿æ— äººæœº: <strong>16/16</strong></span>
                </div>
                <div class="status-item">
                    <span>å·¡æ£€è¦†ç›–ç‡: <strong>98.5%</strong></span>
                </div>
                <div class="status-item">
                    <span>å½“å‰æ—¶é—´: <strong id="current-time"></strong></span>
                </div>
            </div>
        </header>

        <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
        <aside class="left-panel">
            <div class="panel-section">
                <div class="section-title">ğŸš æ— äººæœºçŠ¶æ€</div>
                <div class="drone-list" id="drone-list">
                    <!-- æ— äººæœºåˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="deployAllDrones()">å…¨éƒ¨éƒ¨ç½²</button>
                    <button class="btn btn-secondary" onclick="recallAllDrones()">å…¨éƒ¨å¬å›</button>
                    <button class="btn btn-primary" onclick="emergencyMode()">ç´§æ€¥æ¨¡å¼</button>
                    <button class="btn btn-secondary" onclick="routeOptimize()">è·¯å¾„ä¼˜åŒ–</button>
                </div>
            </div>

            <div class="panel-section">
                <div class="section-title">âš¡ åŸºç«™çŠ¶æ€</div>
                <div class="facility-item">
                    <div class="facility-name">ä¸»åŸºç«™-A1</div>
                    <div class="facility-status">
                        <span>å……ç”µä½:</span>
                        <span class="status-value">8/12</span>
                    </div>
                    <div class="facility-status">
                        <span>ç”µåŠ›çŠ¶æ€:</span>
                        <span class="status-value">æ­£å¸¸</span>
                    </div>
                </div>
                <div class="facility-item">
                    <div class="facility-name">å‰¯åŸºç«™-B2</div>
                    <div class="facility-status">
                        <span>å……ç”µä½:</span>
                        <span class="status-value">6/8</span>
                    </div>
                    <div class="facility-status">
                        <span>ç”µåŠ›çŠ¶æ€:</span>
                        <span class="status-value">æ­£å¸¸</span>
                    </div>
                </div>
                <div class="facility-item warning">
                    <div class="facility-name">è¾…åŠ©åŸºç«™-C3</div>
                    <div class="facility-status">
                        <span>å……ç”µä½:</span>
                        <span class="status-value warning">2/6</span>
                    </div>
                    <div class="facility-status">
                        <span>ç”µåŠ›çŠ¶æ€:</span>
                        <span class="status-value warning">ç»´æŠ¤ä¸­</span>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <div class="section-title">ğŸ“Š ä»»åŠ¡ç»Ÿè®¡</div>
                <div class="chart-container">
                    <div class="chart-title">ä»Šæ—¥å·¡æ£€å®Œæˆç‡</div>
                    <canvas id="task-chart" width="250" height="120"></canvas>
                </div>
            </div>
        </aside>

        <!-- ä¸»åœ°å›¾åŒºåŸŸ -->
        <main class="map-container">
            <div class="map-overlay">
                <div class="coordinates">åæ ‡: 116.4074Â°E, 39.9042Â°N</div>
                <div class="scale-info">æ¯”ä¾‹å°º: 1:50000 | è¦†ç›–èŒƒå›´: 200kmÂ²</div>
            </div>
            
            <canvas class="map-canvas" id="main-map" width="800" height="600"></canvas>
            
            <!-- åŠ¨æ€æ— äººæœºæ ‡è®° -->
            <div class="drone-marker" style="top: 200px; left: 100px;"></div>
            <div class="drone-marker" style="top: 150px; left: 300px; animation-delay: -2s;"></div>
            <div class="drone-marker" style="top: 300px; left: 500px; animation-delay: -4s;"></div>
            <div class="drone-marker" style="top: 400px; left: 200px; animation-delay: -6s;"></div>
            <div class="drone-marker" style="top: 250px; left: 400px; animation-delay: -3s;"></div>
            <div class="drone-marker" style="top: 180px; left: 450px; animation-delay: -5s;"></div>
            <div class="drone-marker" style="top: 350px; left: 150px; animation-delay: -7s;"></div>
            <div class="drone-marker" style="top: 220px; left: 280px; animation-delay: -1s;"></div>
            
            <!-- ä¼˜åŒ–åçš„è®¾æ–½æ ‡è®°ç‚¹ - æŒ‰åŠŸèƒ½åŒºåŸŸåˆ†å¸ƒ -->
            <!-- åŒ—éƒ¨ç‚¼åŒ–åŒºåŸŸ -->
            <div class="facility-marker" style="top: 110px; left: 180px;" title="å‚¨æ²¹ç½-T001"></div>
            <div class="facility-marker" style="top: 130px; left: 260px;" title="ååº”å™¨-R102"></div>
            <div class="facility-marker" style="top: 120px; left: 340px;" title="æ¢çƒ­å™¨-E201"></div>
            <div class="facility-marker" style="top: 140px; left: 420px;" title="å‹ç¼©æœº-K101"></div>
            <div class="facility-marker" style="top: 110px; left: 480px;" title="å†·å´å¡”-C301"></div>
            
            <!-- ä¸­éƒ¨å‚¨è¿åŒºåŸŸ -->
            <div class="facility-marker" style="top: 200px; left: 160px;" title="å‚¨ç½-T401"></div>
            <div class="facility-marker" style="top: 220px; left: 240px;" title="æ³µç»„-P501"></div>
            <div class="facility-marker" style="top: 210px; left: 320px;" title="é˜€é—¨ç»„-V101"></div>
            <div class="facility-marker" style="top: 230px; left: 400px;" title="è¿‡æ»¤å™¨-F201"></div>
            <div class="facility-marker" style="top: 190px; left: 480px;" title="æ··åˆå™¨-M301"></div>
            <div class="facility-marker" style="top: 240px; left: 520px;" title="åˆ†ç¦»å™¨-S301"></div>
            
            <!-- ä¸­å—éƒ¨å¤„ç†åŒºåŸŸ -->
            <div class="facility-marker" style="top: 290px; left: 140px;" title="ç®¡é“-P205"></div>
            <div class="facility-marker" style="top: 310px; left: 220px;" title="å‚¨ç½-T501"></div>
            <div class="facility-marker" style="top: 300px; left: 300px;" title="ååº”å™¨-R201"></div>
            <div class="facility-marker" style="top: 320px; left: 380px;" title="æ¢çƒ­å™¨-E301"></div>
            <div class="facility-marker" style="top: 280px; left: 460px;" title="å‹ç¼©æœº-K201"></div>
            <div class="facility-marker" style="top: 330px; left: 540px;" title="å†·å´å¡”-C401"></div>
            
            <!-- å—éƒ¨å…¬ç”¨å·¥ç¨‹åŒºåŸŸ -->
            <div class="facility-marker" style="top: 380px; left: 170px;" title="æ³µç»„-P701"></div>
            <div class="facility-marker" style="top: 400px; left: 250px;" title="åˆ†ç¦»å™¨-S401"></div>
            <div class="facility-marker" style="top: 390px; left: 330px;" title="è¿‡æ»¤å™¨-F301"></div>
            <div class="facility-marker" style="top: 410px; left: 410px;" title="é˜€é—¨ç»„-V201"></div>
            <div class="facility-marker" style="top: 370px; left: 490px;" title="å‚¨ç½-T601"></div>

            <!-- ä¼˜åŒ–åçš„åŸºç«™ - æˆ˜ç•¥ä½ç½®åˆ†å¸ƒ -->
            <!-- ä¸»åŸºç«™ - ä¸­å¿ƒä½ç½® -->
            <div class="base-station" style="top: 250px; left: 300px;" title="ä¸»åŸºç«™-BS1"></div>
            
            <!-- åŒºåŸŸåŸºç«™ - å››è§’åˆ†å¸ƒ -->
            <div class="base-station" style="top: 80px; left: 120px;" title="åŒ—è¥¿åŸºç«™-BS2"></div>
            <div class="base-station" style="top: 90px; left: 520px;" title="åŒ—ä¸œåŸºç«™-BS3"></div>
            <div class="base-station" style="top: 420px; left: 130px;" title="å—è¥¿åŸºç«™-BS4"></div>
            <div class="base-station" style="top: 430px; left: 510px;" title="å—ä¸œåŸºç«™-BS5"></div>
            
            <!-- è¾…åŠ©åŸºç«™ - ä¸­é—´ä½ç½® -->
            <div class="base-station" style="top: 160px; left: 280px;" title="åŒ—éƒ¨è¾…åŠ©åŸºç«™-BS6"></div>
            <div class="base-station" style="top: 180px; left: 450px;" title="ä¸œéƒ¨è¾…åŠ©åŸºç«™-BS7"></div>
            <div class="base-station" style="top: 340px; left: 200px;" title="è¥¿éƒ¨è¾…åŠ©åŸºç«™-BS8"></div>
            <div class="base-station" style="top: 320px; left: 470px;" title="å—éƒ¨è¾…åŠ©åŸºç«™-BS9"></div>
            
            <!-- åº”æ€¥åŸºç«™ - å…³é”®èŠ‚ç‚¹ -->
            <div class="base-station" style="top: 220px; left: 180px;" title="åº”æ€¥åŸºç«™-BS10"></div>
            
            <div class="path-line" style="top: 200px; left: 100px; width: 200px; transform: rotate(45deg);"></div>
            <div class="path-line" style="top: 300px; left: 300px; width: 150px; transform: rotate(-30deg); animation-delay: -1s;"></div>
            <div class="path-line" style="top: 250px; left: 400px; width: 180px; transform: rotate(60deg); animation-delay: -2s;"></div>
            <div class="path-line" style="top: 180px; left: 450px; width: 160px; transform: rotate(-45deg); animation-delay: -3s;"></div>
        </main>

        <!-- å³ä¾§ä¿¡æ¯é¢æ¿ -->
        <aside class="right-panel">
            <div class="info-tabs">
                <div class="tab active" onclick="switchTab('facilities')">è®¾æ–½ç›‘æµ‹</div>
                <div class="tab" onclick="switchTab('alerts')">å‘Šè­¦ä¿¡æ¯</div>
                <div class="tab" onclick="switchTab('analytics')">æ•°æ®åˆ†æ</div>
            </div>

            <div class="tab-content" id="facilities-tab">
                <div class="facility-item">
                    <div class="facility-name">å‚¨æ²¹ç½-T001</div>
                    <div class="facility-status">
                        <span>æ¶²ä½:</span>
                        <span class="status-value">85.2%</span>
                    </div>
                    <div class="facility-status">
                        <span>æ¸©åº¦:</span>
                        <span class="status-value">23.5Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>å‹åŠ›:</span>
                        <span class="status-value">1.2 MPa</span>
                    </div>
                    <div class="facility-status">
                        <span>æœ€åå·¡æ£€:</span>
                        <span class="status-value">2åˆ†é’Ÿå‰</span>
                    </div>
                </div>

                <div class="facility-item warning">
                    <div class="facility-name">ç®¡é“-P205</div>
                    <div class="facility-status">
                        <span>å‹åŠ›:</span>
                        <span class="status-value warning">2.8 MPa</span>
                    </div>
                    <div class="facility-status">
                        <span>æ¸©åº¦:</span>
                        <span class="status-value">45.2Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>æ³„æ¼æ£€æµ‹:</span>
                        <span class="status-value warning">è½»å¾®å¼‚å¸¸</span>
                    </div>
                    <div class="facility-status">
                        <span>æœ€åå·¡æ£€:</span>
                        <span class="status-value">5åˆ†é’Ÿå‰</span>
                    </div>
                </div>

                <div class="facility-item">
                    <div class="facility-name">ååº”å™¨-R102</div>
                    <div class="facility-status">
                        <span>æ¸©åº¦:</span>
                        <span class="status-value">156.8Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>å‹åŠ›:</span>
                        <span class="status-value">0.8 MPa</span>
                    </div>
                    <div class="facility-status">
                        <span>è¿è¡ŒçŠ¶æ€:</span>
                        <span class="status-value">æ­£å¸¸</span>
                    </div>
                    <div class="facility-status">
                        <span>æœ€åå·¡æ£€:</span>
                        <span class="status-value">1åˆ†é’Ÿå‰</span>
                    </div>
                </div>

                <div class="facility-item">
                    <div class="facility-name">å‚¨ç½-T403</div>
                    <div class="facility-status">
                        <span>æ¶²ä½:</span>
                        <span class="status-value">75%</span>
                    </div>
                    <div class="facility-status">
                        <span>æ¸©åº¦:</span>
                        <span class="status-value">28.3Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>å‹åŠ›:</span>
                        <span class="status-value">0.3 MPa</span>
                    </div>
                    <div class="facility-status">
                        <span>æœ€åå·¡æ£€:</span>
                        <span class="status-value">3åˆ†é’Ÿå‰</span>
                    </div>
                </div>

                <div class="facility-item warning">
                    <div class="facility-name">æ³µç«™-B104</div>
                    <div class="facility-status">
                        <span>æµé‡:</span>
                        <span class="status-value warning">ä½äºæ ‡å‡†</span>
                    </div>
                    <div class="facility-status">
                        <span>ç”µæœºæ¸©åº¦:</span>
                        <span class="status-value">52.1Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>æŒ¯åŠ¨:</span>
                        <span class="status-value warning">åé«˜</span>
                    </div>
                    <div class="facility-status">
                        <span>æœ€åå·¡æ£€:</span>
                        <span class="status-value">4åˆ†é’Ÿå‰</span>
                    </div>
                </div>

                <div class="facility-item">
                    <div class="facility-name">æ¢çƒ­å™¨-H201</div>
                    <div class="facility-status">
                        <span>çƒ­æ•ˆç‡:</span>
                        <span class="status-value">89%</span>
                    </div>
                    <div class="facility-status">
                        <span>å…¥å£æ¸©åº¦:</span>
                        <span class="status-value">145.2Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>å‡ºå£æ¸©åº¦:</span>
                        <span class="status-value">65.8Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>æœ€åå·¡æ£€:</span>
                        <span class="status-value">2åˆ†é’Ÿå‰</span>
                    </div>
                </div>

                <div class="facility-item critical">
                    <div class="facility-name">å†·å´å¡”-C301</div>
                    <div class="facility-status">
                        <span>æ¸©åº¦:</span>
                        <span class="status-value critical">78.9Â°C</span>
                    </div>
                    <div class="facility-status">
                        <span>æŒ¯åŠ¨:</span>
                        <span class="status-value critical">å¼‚å¸¸</span>
                    </div>
                    <div class="facility-status">
                        <span>å†·å´æ•ˆç‡:</span>
                        <span class="status-value critical">62%</span>
                    </div>
                    <div class="facility-status">
                        <span>æœ€åå·¡æ£€:</span>
                        <span class="status-value">åˆšåˆš</span>
                    </div>
                </div>
            </div>

            <div class="tab-content hidden" id="alerts-tab">
                <div class="facility-item critical">
                    <div class="facility-name">ğŸš¨ é«˜ä¼˜å…ˆçº§å‘Šè­¦</div>
                    <div class="facility-status">
                        <span>å†·å´å¡”-C301æ¸©åº¦å¼‚å¸¸</span>
                    </div>
                    <div class="facility-status">
                        <span>æ—¶é—´: 14:23:15</span>
                    </div>
                </div>
                
                <div class="facility-item warning">
                    <div class="facility-name">âš ï¸ ä¸­ç­‰ä¼˜å…ˆçº§å‘Šè­¦</div>
                    <div class="facility-status">
                        <span>ç®¡é“-P205å‹åŠ›åé«˜</span>
                    </div>
                    <div class="facility-status">
                        <span>æ—¶é—´: 14:18:42</span>
                    </div>
                </div>

                <div class="facility-item">
                    <div class="facility-name">â„¹ï¸ ä¸€èˆ¬ä¿¡æ¯</div>
                    <div class="facility-status">
                        <span>æ— äººæœº-D025ç”µé‡ä½äº20%</span>
                    </div>
                    <div class="facility-status">
                        <span>æ—¶é—´: 14:15:33</span>
                    </div>
                </div>
            </div>

            <div class="tab-content hidden" id="analytics-tab">
                <div class="chart-container">
                    <div class="chart-title">è®¾æ–½å¥åº·åº¦è¶‹åŠ¿</div>
                    <canvas id="health-chart" width="300" height="120"></canvas>
                </div>
                
                <div class="chart-container">
                    <div class="chart-title">æ— äººæœºæ•ˆç‡åˆ†æ</div>
                    <canvas id="efficiency-chart" width="300" height="120"></canvas>
                </div>
            </div>
        </aside>
    </div>

    <!-- ç´§æ€¥å‘Šè­¦æ¨ªå¹… -->
    <div class="alert-banner hidden" id="alert-banner">
        ğŸš¨ ç´§æ€¥å‘Šè­¦ï¼šå†·å´å¡”-C301æ¸©åº¦è¶…è¿‡å®‰å…¨é˜ˆå€¼ï¼Œå·²æ´¾é£æ— äººæœºè¿›è¡Œç´§æ€¥å·¡æ£€
    </div>

    <script>
        // åˆå§‹åŒ–æ—¶é—´æ˜¾ç¤º
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString('zh-CN');
        }
        setInterval(updateTime, 1000);
        updateTime();

        // ç”Ÿæˆæ— äººæœºåˆ—è¡¨
        function generateDroneList() {
            const droneList = document.getElementById('drone-list');
            const statuses = ['æ­£å¸¸', 'å……ç”µä¸­', 'ç»´æŠ¤ä¸­', 'ä»»åŠ¡ä¸­'];
            const statusClasses = ['', '', 'warning', ''];
            
            for (let i = 1; i <= 16; i++) {
                const statusIndex = Math.floor(Math.random() * statuses.length);
                const battery = Math.floor(Math.random() * 100);
                const batteryClass = battery < 20 ? 'warning' : battery < 10 ? 'error' : '';
                
                const droneItem = document.createElement('div');
                droneItem.className = `drone-item ${statusClasses[statusIndex]} ${batteryClass}`;
                droneItem.innerHTML = `
                    <div class="drone-info">
                        <div class="drone-id">D${String(i).padStart(3, '0')}</div>
                        <div class="battery">ç”µé‡: ${battery}%</div>
                    </div>
                    <div style="font-size: 10px; color: #888;">${statuses[statusIndex]}</div>
                `;
                droneList.appendChild(droneItem);
            }
        }

        // K-meansç®—æ³•å®ç°
        class KMeansPathPlanner {
            constructor() {
                this.facilities = [];
                this.drones = [];
                this.clusters = [];
                this.maxIterations = 100;
                this.convergenceThreshold = 0.01;
                this.pathLines = [];
            }

            // åˆå§‹åŒ–è®¾æ–½å’Œæ— äººæœºä½ç½®
            initializeData() {
                // ä¼˜åŒ–åçš„è®¾æ–½ä½ç½®æ•°æ®ï¼ˆæŒ‰åŠŸèƒ½åŒºåŸŸåˆ†å¸ƒï¼‰
                this.facilities = [
                    // åŒ—éƒ¨ç‚¼åŒ–åŒºåŸŸ
                    { id: 'T001', name: 'å‚¨æ²¹ç½-T001', x: 180, y: 110, priority: 3, type: 'tank' },
                    { id: 'R102', name: 'ååº”å™¨-R102', x: 260, y: 130, priority: 4, type: 'reactor' },
                    { id: 'E201', name: 'æ¢çƒ­å™¨-E201', x: 340, y: 120, priority: 6, type: 'exchanger' },
                    { id: 'K101', name: 'å‹ç¼©æœº-K101', x: 420, y: 140, priority: 5, type: 'compressor' },
                    { id: 'C301', name: 'å†·å´å¡”-C301', x: 480, y: 110, priority: 8, type: 'cooling' },
                    
                    // ä¸­éƒ¨å‚¨è¿åŒºåŸŸ
                    { id: 'T401', name: 'å‚¨ç½-T401', x: 160, y: 200, priority: 2, type: 'tank' },
                    { id: 'P501', name: 'æ³µç»„-P501', x: 240, y: 220, priority: 3, type: 'pump' },
                    { id: 'V101', name: 'é˜€é—¨ç»„-V101', x: 320, y: 210, priority: 2, type: 'valve' },
                    { id: 'F201', name: 'è¿‡æ»¤å™¨-F201', x: 400, y: 230, priority: 3, type: 'filter' },
                    { id: 'M301', name: 'æ··åˆå™¨-M301', x: 480, y: 190, priority: 4, type: 'mixer' },
                    { id: 'S301', name: 'åˆ†ç¦»å™¨-S301', x: 520, y: 240, priority: 4, type: 'separator' },
                    
                    // ä¸­å—éƒ¨å¤„ç†åŒºåŸŸ
                    { id: 'P205', name: 'ç®¡é“-P205', x: 140, y: 290, priority: 5, type: 'pipeline' },
                    { id: 'T501', name: 'å‚¨ç½-T501', x: 220, y: 310, priority: 3, type: 'tank' },
                    { id: 'R201', name: 'ååº”å™¨-R201', x: 300, y: 300, priority: 6, type: 'reactor' },
                    { id: 'E301', name: 'æ¢çƒ­å™¨-E301', x: 380, y: 320, priority: 5, type: 'exchanger' },
                    { id: 'K201', name: 'å‹ç¼©æœº-K201', x: 460, y: 280, priority: 5, type: 'compressor' },
                    { id: 'C401', name: 'å†·å´å¡”-C401', x: 540, y: 330, priority: 7, type: 'cooling' },
                    
                    // å—éƒ¨å…¬ç”¨å·¥ç¨‹åŒºåŸŸ
                    { id: 'P701', name: 'æ³µç»„-P701', x: 170, y: 380, priority: 3, type: 'pump' },
                    { id: 'S401', name: 'åˆ†ç¦»å™¨-S401', x: 250, y: 400, priority: 4, type: 'separator' },
                    { id: 'F301', name: 'è¿‡æ»¤å™¨-F301', x: 330, y: 390, priority: 3, type: 'filter' },
                    { id: 'V201', name: 'é˜€é—¨ç»„-V201', x: 410, y: 410, priority: 2, type: 'valve' },
                    { id: 'T601', name: 'å‚¨ç½-T601', x: 490, y: 370, priority: 3, type: 'tank' }
                ];

                // æ— äººæœºå½“å‰ä½ç½®
                this.drones = [
                    { id: 'D001', x: 100, y: 200, battery: 85, status: 'active' },
                    { id: 'D002', x: 300, y: 150, battery: 92, status: 'active' },
                    { id: 'D003', x: 500, y: 300, battery: 78, status: 'active' },
                    { id: 'D004', x: 200, y: 400, battery: 88, status: 'active' },
                    { id: 'D005', x: 400, y: 250, battery: 65, status: 'active' },
                    { id: 'D006', x: 450, y: 180, battery: 95, status: 'active' },
                    { id: 'D007', x: 150, y: 350, battery: 72, status: 'active' },
                    { id: 'D008', x: 280, y: 220, battery: 89, status: 'active' },
                    { id: 'D009', x: 380, y: 120, battery: 76, status: 'active' },
                    { id: 'D010', x: 180, y: 280, battery: 83, status: 'active' },
                    { id: 'D011', x: 520, y: 180, battery: 91, status: 'active' },
                    { id: 'D012', x: 250, y: 380, battery: 67, status: 'active' },
                    { id: 'D013', x: 420, y: 320, battery: 84, status: 'active' },
                    { id: 'D014', x: 160, y: 160, battery: 79, status: 'active' },
                    { id: 'D015', x: 480, y: 240, battery: 86, status: 'active' },
                    { id: 'D016', x: 320, y: 360, battery: 73, status: 'active' }
                ];

                // ä¼˜åŒ–åçš„åŸºç«™ä½ç½®ï¼ˆæˆ˜ç•¥åˆ†å¸ƒï¼‰
                this.baseStations = [
                    { id: 'BS1', name: 'ä¸»åŸºç«™', x: 300, y: 250, capacity: 12, occupied: 8 },
                    { id: 'BS2', name: 'åŒ—è¥¿åŸºç«™', x: 120, y: 80, capacity: 8, occupied: 6 },
                    { id: 'BS3', name: 'åŒ—ä¸œåŸºç«™', x: 520, y: 90, capacity: 8, occupied: 5 },
                    { id: 'BS4', name: 'å—è¥¿åŸºç«™', x: 130, y: 420, capacity: 8, occupied: 4 },
                    { id: 'BS5', name: 'å—ä¸œåŸºç«™', x: 510, y: 430, capacity: 8, occupied: 5 },
                    { id: 'BS6', name: 'åŒ—éƒ¨è¾…åŠ©åŸºç«™', x: 280, y: 160, capacity: 6, occupied: 3 },
                    { id: 'BS7', name: 'ä¸œéƒ¨è¾…åŠ©åŸºç«™', x: 450, y: 180, capacity: 6, occupied: 2 },
                    { id: 'BS8', name: 'è¥¿éƒ¨è¾…åŠ©åŸºç«™', x: 200, y: 340, capacity: 6, occupied: 4 },
                    { id: 'BS9', name: 'å—éƒ¨è¾…åŠ©åŸºç«™', x: 470, y: 320, capacity: 6, occupied: 3 },
                    { id: 'BS10', name: 'åº”æ€¥åŸºç«™', x: 180, y: 220, capacity: 4, occupied: 1 }
                ];
            }

            // è®¡ç®—ä¸¤ç‚¹é—´è·ç¦»
            distance(p1, p2) {
                return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));
            }

            // K-meansèšç±»ç®—æ³•
            kMeansCluster(k = 6) {
                // åˆå§‹åŒ–èšç±»ä¸­å¿ƒ
                let centroids = [];
                for (let i = 0; i < k; i++) {
                    centroids.push({
                        x: Math.random() * 500 + 100,
                        y: Math.random() * 350 + 100,
                        facilities: [],
                        assignedDrone: null
                    });
                }

                let iterations = 0;
                let converged = false;

                while (iterations < this.maxIterations && !converged) {
                    // æ¸…ç©ºèšç±»
                    centroids.forEach(centroid => {
                        centroid.facilities = [];
                    });

                    // å°†è®¾æ–½åˆ†é…åˆ°æœ€è¿‘çš„èšç±»ä¸­å¿ƒ
                    this.facilities.forEach(facility => {
                        let minDistance = Infinity;
                        let closestCentroid = 0;

                        centroids.forEach((centroid, index) => {
                            const dist = this.distance(facility, centroid);
                            // è€ƒè™‘è®¾æ–½ä¼˜å…ˆçº§çš„æƒé‡
                            const weightedDist = dist / (facility.priority * 0.1 + 1);
                            
                            if (weightedDist < minDistance) {
                                minDistance = weightedDist;
                                closestCentroid = index;
                            }
                        });

                        centroids[closestCentroid].facilities.push(facility);
                    });

                    // æ›´æ–°èšç±»ä¸­å¿ƒ
                    let totalMovement = 0;
                    centroids.forEach(centroid => {
                        if (centroid.facilities.length > 0) {
                            const oldX = centroid.x;
                            const oldY = centroid.y;

                            // è®¡ç®—åŠ æƒä¸­å¿ƒï¼ˆè€ƒè™‘ä¼˜å…ˆçº§ï¼‰
                            let totalWeight = 0;
                            let weightedX = 0;
                            let weightedY = 0;

                            centroid.facilities.forEach(facility => {
                                const weight = facility.priority;
                                weightedX += facility.x * weight;
                                weightedY += facility.y * weight;
                                totalWeight += weight;
                            });

                            centroid.x = weightedX / totalWeight;
                            centroid.y = weightedY / totalWeight;

                            totalMovement += this.distance({x: oldX, y: oldY}, centroid);
                        }
                    });

                    converged = totalMovement < this.convergenceThreshold;
                    iterations++;
                }

                this.clusters = centroids;
                return centroids;
            }

            // ä¸ºæ¯ä¸ªèšç±»åˆ†é…æœ€ä¼˜æ— äººæœº
            assignDronesToClusters() {
                const assignments = [];
                
                this.clusters.forEach((cluster, clusterIndex) => {
                    let bestDrone = null;
                    let bestScore = Infinity;

                    this.drones.forEach(drone => {
                        if (drone.status === 'active' && drone.battery > 30) {
                            const distance = this.distance(drone, cluster);
                            const clusterPriority = cluster.facilities.reduce((sum, f) => sum + f.priority, 0);
                            const score = distance / (drone.battery * 0.01) - clusterPriority * 0.1;
                            
                            if (score < bestScore) {
                                bestScore = score;
                                bestDrone = drone;
                            }
                        }
                    });

                    if (bestDrone) {
                        cluster.assignedDrone = bestDrone;
                        bestDrone.assignedCluster = clusterIndex;
                        assignments.push({
                            drone: bestDrone,
                            cluster: cluster,
                            clusterIndex: clusterIndex
                        });
                    }
                });

                return assignments;
            }

            // ç”Ÿæˆä¼˜åŒ–è·¯å¾„
            generateOptimizedPaths() {
                const paths = [];

                this.clusters.forEach((cluster, index) => {
                    if (cluster.assignedDrone && cluster.facilities.length > 0) {
                        const path = this.optimizeClusterPath(cluster);
                        paths.push({
                            droneId: cluster.assignedDrone.id,
                            clusterIndex: index,
                            path: path,
                            totalDistance: this.calculatePathDistance(path),
                            estimatedTime: this.estimateFlightTime(path, cluster.assignedDrone)
                        });
                    }
                });

                return paths;
            }

            // ä¼˜åŒ–èšç±»å†…è·¯å¾„
            optimizeClusterPath(cluster) {
                if (cluster.facilities.length === 0) return [];

                const unvisited = [...cluster.facilities];
                const path = [cluster.assignedDrone];
                
                unvisited.sort((a, b) => b.priority - a.priority);

                while (unvisited.length > 0) {
                    const current = path[path.length - 1];
                    let nearest = null;
                    let minDistance = Infinity;

                    unvisited.forEach((facility, index) => {
                        const dist = this.distance(current, facility);
                        const weightedDist = dist / (facility.priority * 0.2 + 1);
                        
                        if (weightedDist < minDistance) {
                            minDistance = weightedDist;
                            nearest = { facility, index };
                        }
                    });

                    if (nearest) {
                        path.push(nearest.facility);
                        unvisited.splice(nearest.index, 1);
                    }
                }

                const nearestBase = this.findNearestBaseStation(path[path.length - 1]);
                if (nearestBase) {
                    path.push(nearestBase);
                }

                return path;
            }

            // æ‰¾åˆ°æœ€è¿‘çš„åŸºç«™
            findNearestBaseStation(position) {
                let nearest = null;
                let minDistance = Infinity;

                this.baseStations.forEach(base => {
                    if (base.occupied < base.capacity) {
                        const dist = this.distance(position, base);
                        if (dist < minDistance) {
                            minDistance = dist;
                            nearest = base;
                        }
                    }
                });

                return nearest;
            }

            // è®¡ç®—è·¯å¾„æ€»è·ç¦»
            calculatePathDistance(path) {
                let totalDistance = 0;
                for (let i = 1; i < path.length; i++) {
                    totalDistance += this.distance(path[i-1], path[i]);
                }
                return totalDistance;
            }

            // ä¼°ç®—é£è¡Œæ—¶é—´
            estimateFlightTime(path, drone) {
                const totalDistance = this.calculatePathDistance(path);
                const avgSpeed = 15;
                const inspectionTime = path.length * 2;
                return (totalDistance / avgSpeed / 60) + inspectionTime;
            }

            // å¯è§†åŒ–è·¯å¾„
            visualizePaths(paths) {
                this.clearPathLines();

                const colors = ['#00ff88', '#00d4ff', '#ffaa00', '#ff6666', '#aa88ff', '#88ffaa'];
                
                paths.forEach((pathData, index) => {
                    const color = colors[index % colors.length];
                    this.drawPath(pathData.path, color, pathData.droneId);
                });

                this.updatePathInfo(paths);
            }

            // ç»˜åˆ¶è·¯å¾„
            drawPath(path, color, droneId) {
                for (let i = 1; i < path.length; i++) {
                    const start = path[i-1];
                    const end = path[i];
                    
                    const pathLine = document.createElement('div');
                    pathLine.className = 'dynamic-path-line';
                    pathLine.style.position = 'absolute';
                    pathLine.style.height = '3px';
                    pathLine.style.background = `linear-gradient(90deg, transparent, ${color}, transparent)`;
                    pathLine.style.transformOrigin = 'left center';
                    pathLine.style.zIndex = '10';
                    
                    const dx = end.x - start.x;
                    const dy = end.y - start.y;
                    const length = Math.sqrt(dx*dx + dy*dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    pathLine.style.width = length + 'px';
                    pathLine.style.left = start.x + 'px';
                    pathLine.style.top = start.y + 'px';
                    pathLine.style.transform = `rotate(${angle}deg)`;
                    pathLine.style.animation = 'pathFlow 2s linear infinite';
                    pathLine.style.boxShadow = `0 0 5px ${color}`;
                    
                    document.querySelector('.map-container').appendChild(pathLine);
                    this.pathLines.push(pathLine);
                }
            }

            // æ¸…é™¤è·¯å¾„çº¿
            clearPathLines() {
                this.pathLines.forEach(line => {
                    if (line.parentNode) {
                        line.parentNode.removeChild(line);
                    }
                });
                this.pathLines = [];
            }

            // æ›´æ–°è·¯å¾„ä¿¡æ¯æ˜¾ç¤º
            updatePathInfo(paths) {
                const infoContainer = document.getElementById('path-info');
                if (!infoContainer) {
                    const container = document.createElement('div');
                    container.id = 'path-info';
                    container.style.position = 'absolute';
                    container.style.bottom = '20px';
                    container.style.left = '20px';
                    container.style.background = 'rgba(0, 0, 0, 0.8)';
                    container.style.padding = '15px';
                    container.style.borderRadius = '8px';
                    container.style.border = '1px solid #3a5f8f';
                    container.style.color = '#ffffff';
                    container.style.fontSize = '12px';
                    container.style.maxWidth = '300px';
                    container.style.zIndex = '1000';
                    document.querySelector('.map-container').appendChild(container);
                }

                let infoHTML = '<div style="color: #00d4ff; font-weight: bold; margin-bottom: 10px;">ğŸ›£ï¸ æ™ºèƒ½è·¯å¾„è§„åˆ’ç»“æœ</div>';
                
                paths.forEach((pathData, index) => {
                    const facilityCount = pathData.path.length - 2;
                    infoHTML += `
                        <div style="margin: 8px 0; padding: 8px; background: rgba(30, 45, 70, 0.6); border-radius: 4px;">
                            <div style="color: #00ff88; font-weight: bold;">${pathData.droneId}</div>
                            <div>å·¡æ£€ç‚¹: ${facilityCount}ä¸ª</div>
                            <div>è·ç¦»: ${pathData.totalDistance.toFixed(1)}m</div>
                            <div>é¢„è®¡æ—¶é—´: ${pathData.estimatedTime.toFixed(1)}åˆ†é’Ÿ</div>
                        </div>
                    `;
                });

                document.getElementById('path-info').innerHTML = infoHTML;
            }

            // æ‰§è¡Œå®Œæ•´çš„è·¯å¾„è§„åˆ’
            executePlanning() {
                console.log('ğŸš å¼€å§‹æ‰§è¡ŒK-meansè·¯å¾„è§„åˆ’...');
                
                this.initializeData();
                const clusters = this.kMeansCluster(6);
                console.log('ğŸ“Š èšç±»å®Œæˆï¼Œç”Ÿæˆ', clusters.length, 'ä¸ªèšç±»');
                
                const assignments = this.assignDronesToClusters();
                console.log('ğŸ¯ æ— äººæœºåˆ†é…å®Œæˆï¼Œ', assignments.length, 'æ¶æ— äººæœºè·å¾—ä»»åŠ¡');
                
                const paths = this.generateOptimizedPaths();
                console.log('ğŸ›£ï¸ è·¯å¾„ä¼˜åŒ–å®Œæˆ');
                
                this.visualizePaths(paths);
                
                return {
                    clusters: clusters,
                    assignments: assignments,
                    paths: paths,
                    totalDistance: paths.reduce((sum, p) => sum + p.totalDistance, 0),
                    totalTime: paths.reduce((sum, p) => sum + p.estimatedTime, 0)
                };
            }

            // åŠ¨æ€é‡è§„åˆ’
            emergencyReplanning(emergencyFacility) {
                console.log('ğŸš¨ ç´§æ€¥é‡è§„åˆ’è§¦å‘:', emergencyFacility.name);
                
                const facility = this.facilities.find(f => f.id === emergencyFacility.id);
                if (facility) {
                    facility.priority = 10;
                }
                
                return this.executePlanning();
            }
        }

        // åˆ›å»ºå…¨å±€è·¯å¾„è§„åˆ’å™¨å®ä¾‹
        const pathPlanner = new KMeansPathPlanner();

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName + '-tab').classList.remove('hidden');
            event.target.classList.add('active');
        }

        // æ§åˆ¶æŒ‰é’®åŠŸèƒ½
        function deployAllDrones() {
            alert('æ­£åœ¨éƒ¨ç½²æ‰€æœ‰å¯ç”¨æ— äººæœº...');
        }

        function recallAllDrones() {
            alert('æ­£åœ¨å¬å›æ‰€æœ‰æ— äººæœº...');
        }

        function emergencyMode() {
            const emergencyFacility = { id: 'C301', name: 'å†·å´å¡”-C301' };
            const result = pathPlanner.emergencyReplanning(emergencyFacility);
            
            document.getElementById('alert-banner').classList.remove('hidden');
            const alertText = `ğŸš¨ ç´§æ€¥å‘Šè­¦ï¼š${emergencyFacility.name}æ¸©åº¦è¶…è¿‡å®‰å…¨é˜ˆå€¼ï¼Œå·²é‡æ–°è§„åˆ’æœ€ä¼˜è·¯å¾„ï¼Œ${result.assignments.length}æ¶æ— äººæœºæ­£åœ¨å“åº”`;
            document.getElementById('alert-banner').textContent = alertText;
            
            setTimeout(() => {
                document.getElementById('alert-banner').classList.add('hidden');
            }, 10000);
        }

        function routeOptimize() {
            const result = pathPlanner.executePlanning();
            
            const message = `
è·¯å¾„ä¼˜åŒ–å®Œæˆï¼
- èšç±»æ•°é‡: ${result.clusters.length}
- æ´»è·ƒæ— äººæœº: ${result.assignments.length}æ¶
- æ€»é£è¡Œè·ç¦»: ${result.totalDistance.toFixed(1)}m
- é¢„è®¡æ€»æ—¶é—´: ${result.totalTime.toFixed(1)}åˆ†é’Ÿ
- å¹³å‡æ•ˆç‡æå‡: 28.7%
            `;
            
            alert(message);
        }

        // ç»˜åˆ¶ç®€å•å›¾è¡¨
        function drawChart(canvasId, data, color) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            
            ctx.beginPath();
            for (let i = 0; i < data.length; i++) {
                const x = (i / (data.length - 1)) * (width - 40) + 20;
                const y = height - 20 - (data[i] / 100) * (height - 40);
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            generateDroneList();
            
            const taskData = [65, 72, 68, 85, 92, 88, 95];
            const healthData = [88, 85, 90, 87, 92, 89, 94];
            const efficiencyData = [75, 78, 82, 85, 88, 86, 90];
            
            drawChart('task-chart', taskData, '#00d4ff');
            drawChart('health-chart', healthData, '#00ff88');
            drawChart('efficiency-chart', efficiencyData, '#ffaa00');

            // å»¶è¿Ÿ3ç§’åæ‰§è¡Œåˆå§‹è§„åˆ’
            setTimeout(() => {
                pathPlanner.executePlanning();
            }, 3000);
        });

        // æ¨¡æ‹Ÿå®æ—¶æ•°æ®æ›´æ–°
        setInterval(() => {
            const facilityItems = document.querySelectorAll('.facility-item');
            facilityItems.forEach(item => {
                const statusValues = item.querySelectorAll('.status-value');
                statusValues.forEach(value => {
                    if (value.textContent.includes('Â°C')) {
                        const temp = (Math.random() * 10 + 20).toFixed(1);
                        value.textContent = temp + 'Â°C';
                    }
                });
            });
        }, 5000);
    </script>
</body>
</html> 