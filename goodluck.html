<!DOCTYPE html>
<html lang="en">
<head>
     <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DJM7SC6MTC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DJM7SC6MTC');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Fortune</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        #result {
            margin-top: 20px;
            font-size: 18px;
        }
        #explanation {
            margin-top: 20px;
            font-size: 14px;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Daily Fortune</h1>
        <button onclick="getLuck()">Check My Fortune</button>
        <div id="result"></div>
        <div id="explanation"></div>
    </div>

    <script>
        const luckTypes = [
            "Super Great Fortune", "Extra Great Fortune", "Excellent Fortune", "Great Fortune", "Very Good Fortune", 
            "Above Average Fortune", "Good Fortune", "Small Fortune", "Fortune", "Tiny Fortune", "Slight Fortune", 
            "Average", "Future Fortune", "Slight Misfortune", "Small Misfortune", "Misfortune", 
            "Medium Misfortune", "Severe Misfortune", "Great Misfortune", "Super Great Misfortune", "Catastrophic Misfortune"
        ];

        const luckWeights = [
            10, 10, 10, 10, 10,
            8, 8, 8, 8, 6, 6,
            4, 4, 2, 2, 1,
            1, 1, 0.5, 0.3, 0.2
        ];

        const explanations = {
            "Super Great Fortune": "Today is your lucky day! Everything will go smoothly, and your efforts will be rewarded. Don't miss any opportunities, bravely pursue your dreams. Remember, a positive attitude is the key to success.\nä»Šå¤©æ˜¯ä½ çš„å¹¸è¿æ—¥ï¼ä¸€åˆ‡éƒ½ä¼šé¡ºåˆ©è¿›è¡Œï¼Œä½ çš„åŠªåŠ›å°†å¾—åˆ°å›æŠ¥ã€‚ä¸è¦é”™è¿‡ä»»ä½•æœºä¼šï¼Œå‹‡æ•¢åœ°è¿½æ±‚ä½ çš„æ¢¦æƒ³ã€‚è®°ä½ï¼Œç§¯æçš„æ€åº¦æ˜¯æˆåŠŸçš„å…³é”®ã€‚",
            "Extra Great Fortune": "Today's fortune is excellent, you will feel the favor of the universe. Whatever you do will go smoothly, it's the best time to achieve important goals.\nä»Šå¤©çš„è¿åŠ¿éå¸¸å¥½ï¼Œä½ ä¼šæ„Ÿå—åˆ°å®‡å®™çš„çœ·é¡¾ã€‚æ— è®ºåšä»€ä¹ˆéƒ½ä¼šé¡ºåˆ©è¿›è¡Œï¼Œè¿™æ˜¯å®ç°é‡è¦ç›®æ ‡çš„æœ€ä½³æ—¶æœºã€‚",
            "Excellent Fortune": "Today's fortune is extremely good, you will encounter many favorable opportunities. Maintain a positive and optimistic attitude, you will reap unexpected good results.\nä»Šå¤©çš„è¿åŠ¿æå¥½ï¼Œä½ ä¼šé‡åˆ°è®¸å¤šæœ‰åˆ©çš„æœºä¼šã€‚ä¿æŒç§¯æä¹è§‚çš„æ€åº¦ï¼Œä½ å°†æ”¶è·æ„æƒ³ä¸åˆ°çš„å¥½ç»“æœã€‚",
            "Great Fortune": "Today is your lucky day! Everything will go smoothly, and your efforts will be rewarded. Don't miss any opportunities, bravely pursue your dreams. Remember, a positive attitude is the key to success.\nä»Šå¤©è¿æ°”å¾ˆå¥½ï¼ä¸€åˆ‡éƒ½ä¼šé¡ºåˆ©ï¼Œä½ çš„åŠªåŠ›å°†å¾—åˆ°å›æŠ¥ã€‚ä¸è¦é”™è¿‡ä»»ä½•æœºä¼šï¼Œå‹‡æ•¢è¿½æ±‚æ¢¦æƒ³ã€‚è®°ä½ï¼Œç§¯ææ€åº¦æ˜¯æˆåŠŸçš„å…³é”®ã€‚",
            "Very Good Fortune": "Today's fortune is very good, you will feel full of energy and creativity. This is a good time to start new projects or try new things.\nä»Šå¤©çš„è¿åŠ¿å¾ˆå¥½ï¼Œä½ ä¼šæ„Ÿåˆ°å……æ»¡èƒ½é‡å’Œåˆ›é€ åŠ›ã€‚è¿™æ˜¯å¼€å§‹æ–°é¡¹ç›®æˆ–å°è¯•æ–°äº‹ç‰©çš„å¥½æ—¶æœºã€‚",
            "Above Average Fortune": "Today's fortune leans towards positive. Although there might be small setbacks, overall it's a good day. Stay alert, you will discover hidden opportunities.\nä»Šå¤©çš„è¿åŠ¿åå‘ç§¯æã€‚è™½ç„¶å¯èƒ½æœ‰å°æŒ«æŠ˜ï¼Œä½†æ€»ä½“æ˜¯ä¸ªå¥½æ—¥å­ã€‚ä¿æŒè­¦æƒ•ï¼Œä½ ä¼šå‘ç°éšè—çš„æœºä¼šã€‚",
            "Good Fortune": "Today's fortune is good. Although you may encounter some small challenges, you can easily handle them by staying calm and patient. This is a good time to try new things.\nä»Šå¤©è¿åŠ¿ä¸é”™ã€‚è™½ç„¶å¯èƒ½é‡åˆ°ä¸€äº›å°æŒ‘æˆ˜ï¼Œä½†ä¿æŒå†·é™å’Œè€å¿ƒå°±èƒ½è½»æ¾åº”å¯¹ã€‚è¿™æ˜¯å°è¯•æ–°äº‹ç‰©çš„å¥½æ—¶æœºã€‚",
            "Small Fortune": "Today's fortune is stable, without much ups and downs. While there may not be any particularly exciting events, you won't encounter any troubles either. Maintain a normal mindset, focus on daily tasks, and you'll have a peaceful day.\nä»Šå¤©è¿åŠ¿ç¨³å®šï¼Œæ²¡æœ‰å¤ªå¤§èµ·ä¼ã€‚è™½ç„¶å¯èƒ½æ²¡æœ‰ç‰¹åˆ«ä»¤äººå…´å¥‹çš„äº‹ä»¶ï¼Œä½†ä¹Ÿä¸ä¼šé‡åˆ°éº»çƒ¦ã€‚ä¿æŒæ­£å¸¸å¿ƒæ€ï¼Œä¸“æ³¨æ—¥å¸¸ä»»åŠ¡ï¼Œä¼šåº¦è¿‡å¹³å’Œçš„ä¸€å¤©ã€‚",
            "Fortune": "Today's fortune leans towards positive. Although you may encounter some small obstacles, as long as you maintain an optimistic attitude, you'll find ways to solve problems. Remember to pay attention to those around you, you might receive unexpected surprises.\nä»Šå¤©çš„è¿åŠ¿åå‘ç§¯æã€‚è™½ç„¶å¯èƒ½é‡åˆ°ä¸€äº›å°éšœç¢ï¼Œåªè¦ä¿æŒä¹è§‚æ€åº¦ï¼Œå°±èƒ½æ‰¾åˆ°è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚è®°å¾—å…³æ³¨èº«è¾¹çš„äººï¼Œå¯èƒ½ä¼šæ”¶åˆ°æ„å¤–æƒŠå–œã€‚",
            "Tiny Fortune": "Today's fortune is slightly good. Although there won't be big surprises, the day will pass smoothly and comfortably. Enjoy the small happinesses in life.\nä»Šå¤©çš„è¿åŠ¿ç•¥å¾®å‘å¥½ã€‚è™½ç„¶ä¸ä¼šæœ‰å¤§æƒŠå–œï¼Œä½†ä¸€å¤©ä¼šå¹³ï¿½ï¿½ï¿½èˆ’é€‚åœ°åº¦è¿‡ã€‚äº«å—ç”Ÿæ´»ä¸­çš„å°å¹¸ç¦å§ã€‚",
            "Slight Fortune": "Today's fortune is slightly positive, there might be some small good things happening. Stay optimistic, good luck might come when you least expect it.\nä»Šå¤©çš„è¿åŠ¿ç•¥å¾®ç§¯æï¼Œå¯èƒ½ä¼šå‘ç”Ÿä¸€äº›å°å¥½äº‹ã€‚ä¿æŒä¹è§‚ï¼Œå¥½è¿å¯èƒ½åœ¨ä½ æœ€æ„æƒ³ä¸åˆ°çš„æ—¶å€™åˆ°æ¥ã€‚",
            "Average": "Today's fortune is average, neither good nor bad. This is a suitable day for reflection and planning, prepare for the future.\nä»Šå¤©çš„è¿åŠ¿å¹³å¹³ï¼Œæ—¢ä¸å¥½ä¹Ÿä¸åã€‚è¿™æ˜¯é€‚åˆåæ€å’Œè§„åˆ’çš„ä¸€å¤©ï¼Œä¸ºæœªæ¥åšå‡†å¤‡ã€‚",
            "Future Fortune": "Today's fortune seems a bit bland, you might feel bored or tired. Don't be discouraged, this is only temporary. Use this time to reflect and plan, prepare for the future. Stay patient, good luck is just around the corner.\nä»Šå¤©çš„è¿åŠ¿çœ‹èµ·æ¥æœ‰ç‚¹å¹³æ·¡ï¼Œä½ å¯èƒ½ä¼šæ„Ÿåˆ°æ— èŠæˆ–ç–²å€¦ã€‚ä¸è¦ç°å¿ƒï¼Œè¿™åªæ˜¯æš‚æ—¶çš„ã€‚åˆ©ç”¨è¿™æ®µæ—¶é—´åæ€å’Œè®¡åˆ’ï¼Œä¸ºæœªæ¥åšå‡†å¤‡ã€‚ä¿æŒè€å¿ƒï¼Œå¥½è¿å°±åœ¨çœ¼å‰ã€‚",
            "Slight Misfortune": "Today's fortune leans slightly towards negative, you might encounter some small troubles. Stay alert, act cautiously, and you'll pass through safely.\nä»Šå¤©çš„è¿åŠ¿ç•¥å¾®åå‘è´Ÿé¢ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›å°éº»çƒ¦ã€‚ä¿æŒè­¦æƒ•ï¼Œè°¨æ…è¡Œäº‹ï¼Œå°±èƒ½å®‰å…¨åº¦è¿‡ã€‚",
            "Small Misfortune": "Today's fortune is not ideal, you might encounter some setbacks. Don't be discouraged, maintain a positive attitude, keep working hard, and things will eventually turn around.\nä»Šå¤©çš„è¿åŠ¿ä¸å¤ªç†æƒ³ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›æŒ«æŠ˜ã€‚ä¸è¦ç°å¿ƒï¼Œä¿æŒç§¯ææ€åº¦ï¼Œç»§ç»­åŠªåŠ›ï¼Œäº‹æƒ…æœ€ç»ˆä¼šå¥½è½¬ã€‚",
            "Misfortune": "Today's fortune is not ideal, you may encounter some difficulties or setbacks. Don't be discouraged, this is an opportunity to learn and grow. Stay alert, act cautiously, and believe in your ability to overcome difficulties.\nä»Šå¤©è¿åŠ¿ä¸ä½³ï¼Œå¯èƒ½é‡åˆ°ä¸€äº›å›°éš¾æˆ–æŒ«æŠ˜ã€‚ä¸è¦ç°å¿ƒï¼Œè¿™æ˜¯å­¦ä¹ å’Œæˆé•¿çš„æœºä¼šã€‚ä¿æŒè­¦æƒ•ï¼Œè°¨æ…è¡Œäº‹ï¼Œç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›å…‹æœå›°éš¾ã€‚",
            "Medium Misfortune": "Today's fortune is poor, you might encounter some difficulties. Stay calm, think rationally, believe in your ability to overcome these obstacles.\nä»Šå¤©çš„è¿åŠ¿ä¸å¥½ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸€äº›å›°éš¾ã€‚ä¿æŒå†·é™ï¼Œç†æ€§æ€è€ƒï¼Œç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›å…‹æœè¿™äº›éšœç¢ã€‚",
            "Severe Misfortune": "Today's fortune is very unfavorable, you might encounter major challenges. Stay alert, act cautiously, seek help and advice from others when necessary.\nä»Šå¤©çš„è¿åŠ¿ï¿½ï¿½ï¿½ä¸åˆ©ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°é‡å¤§æŒ‘æˆ˜ã€‚ä¿æŒè­¦æƒ•ï¼Œè°¨æ…è¡Œäº‹ï¼Œå¿…è¦æ—¶å¯»æ±‚ä»–äººçš„å¸®åŠ©å’Œå»ºè®®ã€‚",
            "Great Misfortune": "Today's fortune is poor, you may encounter some unexpected challenges. Don't panic, staying calm and rational is important. This is a good opportunity to exercise your coping abilities. Remember, after every dark day, the sun will shine again.\nä»Šå¤©è¿åŠ¿ä¸ä½³ï¼Œå¯èƒ½é‡åˆ°ä¸€äº›æ„å¤–æŒ‘æˆ˜ã€‚ä¸è¦æ…Œå¼ ï¼Œä¿æŒå†·é™å’Œç†æ€§å¾ˆé‡è¦ã€‚è¿™æ˜¯é”»ç‚¼åº”å¯¹èƒ½åŠ›çš„å¥½æœºä¼šã€‚è®°ä½ï¼Œæ¯ä¸ªé»‘æš—çš„æ—¥å­è¿‡åï¼Œé˜³å…‰æ€»ä¼šå†æ¬¡ç…§è€€ã€‚",
            "Super Great Misfortune": "Today's fortune is extremely poor, you might encounter severe difficulties or crises. Staying calm and rational is very important, be cautious with every decision, seek professional help if necessary.\nä»Šå¤©çš„è¿åŠ¿æå·®ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸¥é‡çš„å›°éš¾æˆ–å±æœºã€‚ä¿æŒå†·é™å’Œç†æ€§éå¸¸é‡è¦ï¼Œæ¯ä¸ªå†³å®šéƒ½è¦è°¨æ…ï¼Œå¿…è¦æ—¶å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚",
            "Catastrophic Misfortune": "Today's fortune is shockingly bad, you might encounter unprecedented challenges. But please remember, this is only temporary. Stay strong, believe in yourself, this difficult time will pass. Crisis is also an opportunity, perhaps this is a chance for a complete change.\nä»Šå¤©çš„è¿ï¿½ï¿½ç³Ÿç³•åˆ°ä»¤äººéœ‡æƒŠï¼Œä½ å¯èƒ½ä¼šé‡åˆ°å‰æ‰€æœªæœ‰çš„æŒ‘æˆ˜ã€‚ä½†è¯·è®°ä½ï¼Œè¿™åªæ˜¯æš‚æ—¶çš„ã€‚ä¿æŒåšå¼ºï¼Œç›¸ä¿¡è‡ªå·±ï¼Œè¿™ä¸ªå›°éš¾æ—¶æœŸç»ˆå°†è¿‡å»ã€‚å±æœºä¹Ÿæ˜¯æœºé‡ï¼Œä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªå½»åº•æ”¹å˜çš„æœºä¼šã€‚"
        };

        async function getLuck() {
            try {
                // Display progress bar æ˜¾ç¤ºè¿›åº¦æ¡
                document.getElementById('result').innerHTML = '<progress id="luckProgress" value="0" max="100"></progress>';
                const progressBar = document.getElementById('luckProgress');
                
                // Get current date è·å–å½“å‰æ—¥æœŸ
                const today = new Date().toISOString().split('T')[0];
                progressBar.value = 20;
                
                // Get weather è·å–å¤©æ°”
                const weatherResponse = await fetch('https://wttr.in/?format=%t');
                const weather = await weatherResponse.text();
                progressBar.value = 40;
                
                // Get IP address è·å–IPåœ°å€
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ip = ipData.ip;
                progressBar.value = 60;
                
                // Combine data and calculate hash åˆå¹¶ï¿½ï¿½ï¿½æ®å¹¶è®¡ç®—å“ˆå¸Œ
                const combinedData = today + weather + ip;
                const hash = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(combinedData));
                const hashArray = Array.from(new Uint8Array(hash));
                const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                progressBar.value = 80;
                
                // Use weighted random selection for fortune ä½¿ç”¨åŠ æƒéšæœºé€‰æ‹©è¿åŠ¿
                let luck;
                try {
                    const totalWeight = luckWeights.reduce((a, b) => a + b, 0);
                    let randomValue = (parseInt(hashHex.substr(0, 8), 16) / 0xffffffff) * totalWeight;
                    let cumulativeWeight = 0;
                    let selectedIndex = 0;

                    for (let i = 0; i < luckWeights.length; i++) {
                        cumulativeWeight += luckWeights[i];
                        if (randomValue <= cumulativeWeight) {
                            selectedIndex = i;
                            break;
                        }
                    }

                    luck = luckTypes[selectedIndex];
                } catch (weightError) {
                    console.error('Error in weight calculation:', weightError);
                    // Fallback to simple random selection
                    luck = luckTypes[Math.floor(Math.random() * luckTypes.length)];
                }

                progressBar.value = 100;
                
                // Replace progress bar with result æ›¿æ¢è¿›åº¦æ¡ä¸ºç»“æœ
                setTimeout(() => {
                    document.getElementById('result').innerHTML = `
                        <div class="fortune-result">
                            <h2>Today's Fortune ä»Šæ—¥è¿åŠ¿</h2>
                            <div class="fortune-type">${luck}</div>
                            <div class="fortune-icon">ğŸ”®</div>
                        </div>
                    `;
                    document.getElementById('explanation').innerHTML = `
                        <div class="fortune-explanation">
                            <h3>Explanation è§£é‡Š</h3>
                            <p>${explanations[luck]}</p>
                        </div>
                    `;
                    
                    // Add CSS styles æ·»åŠ CSSæ ·å¼
                    const style = document.createElement('style');
                    style.textContent = `
                        .fortune-result {
                            background: linear-gradient(45deg, #ff9a9e, #fad0c4);
                            border-radius: 15px;
                            padding: 20px;
                            text-align: center;
                            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
                        }
                        .fortune-type {
                            font-size: 24px;
                            font-weight: bold;
                            color: #fff;
                            margin: 10px 0;
                        }
                        .fortune-icon {
                            font-size: 48px;
                            margin: 10px 0;
                        }
                        .fortune-explanation {
                            background-color: #fff;
                            border-radius: 15px;
                            padding: 20px;
                            margin-top: 20px;
                            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
                        }
                    `;
                    document.head.appendChild(style);
                }, 500);
            } catch (error) {
                console.error('Error getting fortune è·å–è¿åŠ¿æ—¶å‡ºé”™:', error);
                document.getElementById('result').innerHTML = 'Unable to get fortune, please try again later. æ— æ³•è·å–è¿åŠ¿ï¼Œè¯·ç¨åå†è¯•ã€‚';
            }
        }
    </script>

 
</body>
</html>
